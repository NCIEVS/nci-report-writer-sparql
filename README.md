# nci-report-writer2
SPARQL-based Report Writer query and reporting tool.

# Overview
The ReportWriter SPARQL application is a prototype for creating reports
using a SPARQL endpoint. This version was written in Java and was tested
against a Stardog triple store.

The application has 2 parts:

1. reportwriter-program: This is a Java application that can be run
from the command line to produce a report based on a report template.

2. reportwriter-web: This is a Web application that can be used to build
new report templates, run existing reports, and view completed reports.
The web application will call the reportwriter-program to generate the
reports.

# Building and Running reportwriter-program
The JAR file for this program can be generated using *gradlew* command
in the reportwriter-progam directory. The JAR file generated by running
this command will be located in the build/libs directory. The proper
generation of this JAR file for a specific environment is specified
in the reportwriter-program/src/main/setenv.sh file. This file must be
edited to match your environment.

Sample steps below after editing the setenv.sh file:

```
cd reportwriter-program/src/main/bin
source setenv.sh
cd reportwriter-program
gradlew clean build
cd build/libs
```

## setenv.sh
This is the example script available in GIT.
```
export LOGGING_LEVEL_ORG_SPRINGFRAMEWORK="ERROR"
export LOGGING_LEVEL_GOV_NIH_NCI_EVS_RW="INFO"

export STARDOG_USERNAME="REPLACE_WITH_USERNAME"
export STARDOG_PASSWORD="REPLACE_WITH_PASSWORD"

export STARDOG_URL="REPLACE_WITH_STARDOG_URL"
export STARDOG_QUERY_URL="REPLACE_WITH_STARDOG_QUERY_URL"
export STARDOG_GRAPH_NAME="REPLACE_WITH_STARDOG_GRAPH_NAME"

export STARDOG_OWL_FILENAME="Thesaurus.owl"
export STARDOG_READ_TIMEOUT="10000"
export STARDOG_CONNECT_TIMEOUT="10000"

export RW_TEMPLATE_DIRECTORY="REPLACE_WITH_TEMPLATE_DIRECTORY"
export RW_OUTPUT_DIRECTORY="REPLACE_WITH_OUTPUT_DIRECTORY"
```

This is the example script configured for local environment.
```
export LOGGING_LEVEL_ORG_SPRINGFRAMEWORK="ERROR"
export LOGGING_LEVEL_GOV_NIH_NCI_EVS_RW="INFO"

export STARDOG_USERNAME="adminusername"
export STARDOG_PASSWORD="adminpassword"

export STARDOG_URL="http://localhost:5820/NCIT2"
export STARDOG_QUERY_URL="http://localhost:5820/NCIT2/query"
export STARDOG_GRAPH_NAME="http://NCI_T"

export STARDOG_OWL_FILENAME="Thesaurus.owl"
export STARDOG_READ_TIMEOUT="10000"
export STARDOG_CONNECT_TIMEOUT="10000"

export RW_TEMPLATE_DIRECTORY="/home/johndoe/templates"
export RW_OUTPUT_DIRECTORY="/home/johndoe/output"
```

# Examples
In the reportwriter-examples directory, there are sample shell scripts
for running a report in the bin directory, and sample report templates
are located in the templates directory.

The runReportWriter.sh script in the bin directory is an example of
setting the environment variables to run against a locally installed
version of Stardog.
